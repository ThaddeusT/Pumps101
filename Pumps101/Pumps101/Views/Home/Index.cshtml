@model Pumps101.Models.LevelModel

<script type="text/javascript">
    var Resource = { img: {}, sfx: {} }
    var canvas;
    var ctx;
    var width;
    var height;
    var GridSize = 0;
    Resource.img.container = new Image();
    Resource.img.pump = new Image();
    var imagesLoaded = false;
    var columns = 0;
    var rows = 0;
    function drawcanvas() {
        canvas = document.getElementById("canvas");
        ctx = canvas.getContext("2d");
        width = canvas.width;
        height = canvas.height;
        GridSize = Math.round(width * .02);
        rows = Math.round(height / GridSize);
        columns = Math.round(width / GridSize);
        drawGrid();
        drawImages();
    }

    function drawGrid() {
        ctx.strokeStyle = "rgb(240,240,240)";;
        var i;
        for (i = 0; i < height; i += GridSize) {
            ctx.lineWidth = 1;
            ctx.moveTo(0, i);
            ctx.lineTo(width, i);
            ctx.stroke();
        }
        for (i = 0; i < width; i += GridSize) {
            ctx.lineWidth = 1;
            ctx.moveTo(i, 0);
            ctx.lineTo(i, height);
            ctx.stroke();
        }
    }

    function drawImages() {
        if (imagesLoaded) {
            @if(Model.Level == 1)
            {
                @:ctx.drawImage(Resource.img.pump, ((columns / 2) - 1) * GridSize, (rows / 2) * GridSize, GridSize * 2, GridSize * 2);
            }
        }
        else {
            Resource.img.container.onload = function () {
                @if(Model.Level == 1)
                {
                    @:ctx.drawImage(Resource.img.pump, ((columns / 2)-1) * GridSize, (rows / 2) * GridSize, GridSize * 2, GridSize * 2);
                }
            };
            Resource.img.container.src = '@Url.Content("/Content/Images/container.PNG")';
            Resource.img.pump.src = '@Url.Content("/Content/Images/pump.PNG")';
            imagesLoaded = true;
        }
    }
</script>


<canvas id="canvas">
    HTML5 Canvas not supported.
</canvas>
<div id="fix">&copy; @DateTime.Now.Year - Pumps101</div>